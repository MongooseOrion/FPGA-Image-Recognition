# 评估报告

*本文档旨在详细介绍该项目的开发过程。*

## 1 系统功能简介

### 1.1 系统功能

该项目是一个基于开源 RISC-V 核心的目标识别系统，利用 Nuclei 提供的开源 RISC-V 核心，从源代码构建而成。该系统采用 TensorFlow Lite 框架，能够实现对 30 多个种类的物体进行准确的识别。

为了确保 TensorFlow Lite 及其检查点文件的正常工作，作者创建了 FreeRTOS 操作系统，并将该框架嵌入到上层操作系统中，以提供完整的功能和稳定性。

系统的一般工作方式如下：首先，系统通过摄像头捕获实时图像，并将图像加载到内存中。接下来，经过处理器的处理，系统会执行目标检测算法，利用先进的机器学习模型对图像中的物体进行识别和分类。最后，系统将处理后的图像通过HDMI接口显示在外部显示器上，使用户可以直观地观察到目标物体的识别结果。

这个系统具有以下几个显著的特点和优势：

  1. 强大的目标识别能力：系统采用了TensorFlow Lite框架，该框架结合了先进的深度学习技术，能够高效准确地对图像中的物体进行识别。通过训练和优化模型，系统能够识别超过30种不同种类的物体，为用户提供全面的目标识别功能。
  2. 高度可定制化：由于系统采用了开源的RISC-V核心和FreeRTOS操作系统，用户可以自由地对系统进行定制和扩展。用户可以根据自身需求，优化算法、修改模型参数或增加新的功能模块，从而实现更加个性化的目标识别系统。
  3. 高效的实时性能：通过将目标识别算法与硬件资源充分结合，系统能够在实时性要求较高的场景下快速准确地完成物体识别任务。这种高效的实时性能使系统适用于各种应用领域，包括智能监控、机器人导航、智能驾驶等。
  4. 易用的用户界面：系统通过HDMI接口将识别结果显示在外部显示器上，用户可以直接观察到物体识别的效果。这种直观的用户界面使得用户可以快速了解系统的工作状态，方便进行调试和优化。



### 1.2 应用场景分析

该系统以国产 FPGA 平台为基础进行开发，与头部企业 Xilinx 等 FPGA 开发平台有所不同。尽管国产 FPGA 平台的生态系统面临资源匮乏的挑战，但正是这种情况为该系统带来了开拓性和创新性的机会。

该系统完全依赖于开源社群的资源进行开发。从处理器到交叉编译工具链，所有的关键组件都是开源的。这为开发者提供了充分利用开源社群资源的机会，避免了对闭源技术的依赖和限制。同时，参与开源社群的贡献和交流，开发者还能够获得更多的知识和支持。

主要应用场景是边缘计算。边缘计算是一种将计算能力和数据处理能力推向数据源头的方式，即在接近数据源的边缘设备上进行计算和数据处理。由于边缘设备通常具有资源有限、功耗限制和实时性要求等特点，该系统的设计目标是满足边缘计算场景下的需求。

尽管在基于国产 FPGA 平台的开发中可能面临生态资源不足的挑战，但该系统充分利用开源社群资源的优势，具备一定的开拓性和创新性。它为边缘设备上的高效计算和实时数据处理提供了解决方案，帮助提升边缘计算系统的性能和可靠性。

总之，该系统以国产 FPGA 平台为基础，完全基于开源解决方案开发。它专注于边缘计算场景，并具有创新性和开拓性。尽管面临生态资源不足的挑战，但该系统通过充分利用开源社群资源，为边缘计算领域带来了新的解决方案。

## 2 系统框架及硬件介绍

### 2.1 系统框图

该项目的主要硬件模块包括：HBirdv2 SoC、摄像头模块（OV5640）、高速存取模块（DDR3）和显示模块（HDMI）。

<div align='center'><img src='.\pic\2023-05-30 173629.png' alt='' title='系统框图'></div>

根据需求，视觉系统挂载在外设总线的第 15 个端口（按照 RTL 的排序，名称为 o15_icb），地址为 0x1004_2000 - 0x1004_2FFF。

SoC 的存储资源包括 ITCM、DTCM 和 ROM。ITCM 的可配置地址区间为 0x8000_0000 - 0x8001_FFFF；DTCM 的可配置地址区间为 0x9000_0000 - 0x8001_FFFF；ROM 挂载在存储总线上，大小为 4KB，默认仅存储一条跳转指令，将直接跳至 ITCM 的起始地址位置并开始执行，其地址区间为0x0000_1000 - 0x0000_1FFF。

外部通信功能，例如 JTAG 调试功能（图中未标出）、UART 串行通信接口和 IIC 接口等均为 HBirdv2 SoC 默认挂载，因此可以方便地调用它们。有关该部分的更多内容，可见第 章。

### 2.2 视觉模块

视觉系统由摄像头模块、DDR 模块和显示模块构成。通过将它们集成在一起，可以避免高速数据流使系统总线无响应的情况，尤其是 DDR 模块，对数据传输敏感度较高。紫光提供的 DDR IP 核使用 AXI4 Lite 总线，通过硬连接的方式，将视频采集和显示功能集成，减少了 SoC 系统外设总线协议间转换的工作量和全系统开销。

<div align='center'><img src='.' alt='' title='视觉模块硬件框图'></div>



